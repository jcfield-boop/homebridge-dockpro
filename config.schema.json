{
  "pluginAlias": "SleepMeBasic",
  "pluginType": "platform",
  "singular": true,
  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "title": "Platform Name",
        "type": "string",
        "default": "SleepMe Basic",
        "required": true
      },
      "apiToken": {
        "title": "API Token",
        "type": "string",
        "format": "password",
        "description": "Your SleepMe API token (obtain from your account at sleep.me)",
        "required": true
      },
      "unit": {
        "title": "Temperature Unit",
        "type": "string",
        "default": "C",
        "enum": ["C", "F"],
        "enumNames": ["Celsius (°C)", "Fahrenheit (°F)"],
        "description": "Select preferred temperature unit"
      },
      "enableScheduling": {
        "title": "Enable Scheduling",
        "type": "boolean",
        "default": false
      },
      "schedules": {
        "title": "Temperature Schedules",
        "type": "array",
        "condition": {
          "functionBody": "return model.enableScheduling === true"
        },
        "items": {
          "type": "object",
          "properties": {
            "time": {
              "title": "Time",
              "type": "string",
              "format": "time",
              "description": "Time in 24-hour format (HH:MM)",
              "placeholder": "21:30"
            },
            "temperature": {
              "title": "Temperature",
              "type": "number",
              "minimum": 13,
              "maximum": 46,
              "multipleOf": 0.5,
              "default": 21,
              "description": "Target temperature in Celsius (13-46°C)",
              "required": true
            },
            "dayType": {
              "title": "Days",
              "type": "string",
              "enum": ["everyday", "weekday", "weekend", "specific"],
              "enumNames": ["Every Day", "Weekdays Only", "Weekends Only", "Specific Day"],
              "default": "everyday"
            },
            "specificDay": {
              "title": "Day of Week",
              "type": "string",
              "enum": ["0", "1", "2", "3", "4", "5", "6"],
              "enumNames": ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
              "default": "1",
              "condition": {
                "functionBody": "return model.dayType === 'specific'"
              }
            },
            "warmHug": {
              "title": "Warm Hug",
              "type": "boolean",
              "default": false,
              "description": "Gradually warm up your bed before the scheduled time. This feature slowly increases the temperature in small increments, creating a gentle and comfortable wake up environment that feels like a warm embrace and will (probably) wake you up."
            },
            "warmHugDuration": {
              "title": "Warm Hug Duration",
              "type": "string",
              "enum": ["10", "15", "20", "30", "45", "60"],
              "enumNames": ["10 minutes", "15 minutes", "20 minutes", "30 minutes", "45 minutes", "60 minutes"],
              "default": "20",
              "description": "How long before the scheduled time to begin gradually increasing the temperature",
              "condition": {
                "functionBody": "return model.warmHug === true"
              }
            }
          },
          "required": ["time", "temperature"]
        }
      },
      "pollingInterval": {
        "title": "Polling Interval",
        "type": "integer",
        "default": 60,
        "minimum": 30,
        "maximum": 300,
        "description": "How frequently to check device status (in seconds) - minimum 30 seconds, maximum 300 seconds"
      },
      "debugMode": {
        "title": "Debug Mode",
        "type": "boolean",
        "default": false,
        "description": "Enable verbose logging for troubleshooting"
      },
      "verboseLogging": {
        "title": "Verbose Logging",
        "type": "boolean",
        "default": false,
        "description": "Log additional details for advanced troubleshooting"
      }
    },
    "required": ["apiToken"]
  },
  "layout": [
    "name",
    "apiToken",
    "unit",
    {
      "key": "enableScheduling",
      "type": "checkbox"
    },
    {
      "key": "schedules",
      "type": "array",
      "buttonText": "Add Schedule",
      "condition": {
        "functionBody": "return model.enableScheduling === true"
      },
      "items": [
        {
          "key": "schedules[].time",
          "type": "string"
        },
        {
          "key": "schedules[].temperature",
          "type": "number" 
        },
        {
          "key": "schedules[].dayType",
          "type": "select"
        },
        {
          "key": "schedules[].specificDay",
          "type": "select" 
        },
        "schedules[].warmHug",
        {
          "key": "schedules[].warmHugDuration",
          "type": "select"
        }
      ]
    },
    {
      "key": "advanced",
      "type": "section",
      "title": "Advanced Settings",
      "expandable": true,
      "expanded": false,
      "items": [
        {
          "key": "pollingInterval",
          "type": "number"
        },
        "debugMode",
        "verboseLogging"
      ]
    }
  ],
  "schema:dynamic-device-id": {
    "action": "getDynamicDeviceIds",
    "label": "Select Device"
  }
}